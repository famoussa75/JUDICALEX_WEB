{% extends 'start/base.html' %}


{% block title %}Blog{% endblock title %}

{% block content %}
{% load static %}

<style>
    .post-preview {
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s ease-in-out;
        margin-bottom: 30px;
    }

    .post-preview:hover {
        transform: translateY(-5px);
    }

    .post-title {
        font-size: 1.75rem;
        font-weight: 700;
        margin-top: 15px;
        margin-bottom: 10px;
    }

    .post-subtitle {
        font-size: 1.2rem;
        color: #6c757d;
    }

    .post-meta {
        font-size: 0.9rem;
        color: #adb5bd;
    }

    .post-image {
        width: 100%;
        height: auto;
        max-height: 350px;
        /* Limite la hauteur maximale de l'image */
        border-radius: 8px;
        object-fit: cover;
        /* Garde l'image centrée si elle dépasse la hauteur */
        border-radius: 8px;
    }

    .content-section {
        padding: 15px;
    }
</style>


<div class="page-wrapper">
    <div class="container-xl">
        <!-- Page title -->
        <div class="page-header text-white d-print-none">
            <div class="row align-items-center">
                <div class="col">
                    <!-- Page pre-title -->

                    <h1 class="niceTitle display-6" style="color:white;text-align: center;">
                        Actualités Judiciaires
                    </h1>
                </div>
                <!-- Page title actions -->
                <div class="col-auto ms-auto d-print-none">
                    <div class="btn-list">
                        <!-- Au d'une nouvelle idee de widget -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="page-body mt-5">
        <div class="container-xl mt-5">

            <div class="row g-3">
                <div class="col-md-8 blog-main bg-white p-3">
                    <div id="loader"  class="loader_post" style="margin-right: 800rem;"></div>
                    <div id="myDiv" class="animate-bottom">
                        <div class="blog-post">
                            {% if post.image %}
                            <img src="{{ post.image.url }}" alt="Image de {{ post.title }}" class="post-image">
                            {% endif %}
                            <h2 class="blog-post-title mt-2">{{ post.title }}</h2>
                            <p class="blog-post-meta">{{ post.created_at }}</p>

                            <p>{{ post.content }}</p>
                            <hr>

                        </div><!-- /.blog-post -->


                        <!-- Section des commentaires -->
                        <h3><i class="fa fa-comments" ></i> Commentaires</h3>
                        <div class="comments">
                            {% for comment in comments %}
                                <div class="comment mb-3 p-2 bg-light rounded">
                                    <p><strong><i class="fa fa-user" ></i> {{ comment.user.first_name }} {{ comment.user.last_name }}</strong> - {{ comment.created_at }}</p>
                                    <p>{{ comment.content }}</p>
                                </div>
                            {% empty %}
                                <p>Aucun commentaire pour l'instant. Soyez le premier à commenter !</p>
                            {% endfor %}
                        </div>
    
                        <!-- Formulaire d'ajout de commentaire -->
                        {% if request.user.is_authenticated %}
                            <h4><i class="fa fa-plus-circle"></i> Ajouter un commentaire</h4>
                            <form method="POST">
                                {% csrf_token %}
                                {{ form.as_p }}
                                <button type="submit" class="btn btn-primary">Envoyer</button>
                            </form>
                        {% else %}
                            <p>Vous devez <a href="#" data-bs-toggle="modal" data-bs-target="#modal-login">vous connecter</a> pour commenter cet article.</p>
                        {% endif %}
                        <hr>

                        <div class="blog-post">
                            <h2 class="blog-post-title">Articles similaires</h2>
                            <p class="blog-post-meta">December 23, 2013 by <a href="#">Jacob</a></p>
                            <div id="carouselExampleAutoplaying" class="carousel slide mb-5 mt-5" data-bs-ride="carousel">
                                <div class="carousel-inner mt-4">
                                    <div class="carousel-item active">
                                        <div class="row">
                                            {% if category_post.0%}
                                            <div class="col-md-6">
                                                <div class="card flex-md-row mb-4 box-shadow h-md-250">
                                                    <div class="card-body d-flex flex-column align-items-start">
                                                        <strong class="d-inline-block mb-2 text-primary">{{ category_post.0.category }}</strong>
                                                        <h3 class="mb-0">
                                                            <a class="text-dark" href="{% url 'post_detail' category_post.0.id %}">{{ category_post.0.title }}</a>
                                                        </h3>
                                                        <div class="mb-1 text-muted">{{ category_post.0.created_at }}</div>
                                                        <p class="card-text mb-auto">{{ category_post.0.content|truncatewords:5 }}</p>
                                                        <a href="{% url 'post_detail' category_post.0.id %}">Lire plus -></a>
                                                    </div>
                                                    <img class="card-img-right flex-auto d-none d-md-block"
                                                        data-src="holder.js/200x250?theme=thumb" alt="Thumbnail [200x250]"
                                                        src="{{ category_post.0.image.url }}"
                                                        data-holder-rendered="true" style="width: 200px; height: 250px; object-fit: cover;">
                                                </div>
                                            </div>
                                            {% endif %}
                                            
                                            {% if category_post.1 %}
                                            <div class="col-md-6">
                                                <div class="card flex-md-row mb-4 box-shadow h-md-250">
                                                    <div class="card-body d-flex flex-column align-items-start">
                                                        <strong class="d-inline-block mb-2 text-primary">{{ category_post.1.category }}</strong>
                                                        <h3 class="mb-0">
                                                            <a class="text-dark" href="{% url 'post_detail' category_post.1.id %}">{{ category_post.1.title }}</a>
                                                        </h3>
                                                        <div class="mb-1 text-muted">{{ category_post.1.created_at }}</div>
                                                        <p class="card-text mb-auto">{{ category_post.1.content|truncatewords:5 }}</p>
                                                        <a href="{% url 'post_detail' category_post.1.id %}">Lire plus -></a>
                                                    </div>
                                                    <img class="card-img-right flex-auto d-none d-md-block"
                                                        data-src="holder.js/200x250?theme=thumb" alt="Thumbnail [200x250]"
                                                        src="{{ category_post.1.image.url }}"
                                                        data-holder-rendered="true" style="width: 200px; height: 250px; object-fit: cover;">
                                                </div>
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    
                                    {% if category_post|length > 2 %}
                                        
                                    <div class="carousel-item">
                                        <div class="row">
                                            {% if category_post.2 %}
                                            <div class="col-md-6">
                                                <div class="card flex-md-row mb-4 box-shadow h-md-250">
                                                    <div class="card-body d-flex flex-column align-items-start">
                                                        <strong class="d-inline-block mb-2 text-primary">{{ category_post.2.category }}</strong>
                                                        <h3 class="mb-0">
                                                            <a class="text-dark" href="{% url 'post_detail' category_post.2.id %}">{{ category_post.2.title }}</a>
                                                        </h3>
                                                        <div class="mb-1 text-muted">{{ category_post.2.created_at }}</div>
                                                        <p class="card-text mb-auto">{{ category_post.2.content|truncatewords:5 }}</p>
                                                        <a href="{% url 'post_detail' category_post.2.id %}">Lire plus -></a>
                                                    </div>
                                                    <img class="card-img-right flex-auto d-none d-md-block"
                                                        data-src="holder.js/200x250?theme=thumb" alt="Thumbnail [200x250]"
                                                        src="{{ category_post.2.image.url }}"
                                                        data-holder-rendered="true" style="width: 200px; height: 250px; object-fit: cover;">
                                                </div>
                                            </div>
                                            {% endif %}
                                            {% if category_post.3 %}
                                            <div class="col-md-6">
                                                <div class="card flex-md-row mb-4 box-shadow h-md-250">
                                                    <div class="card-body d-flex flex-column align-items-start">
                                                        <strong class="d-inline-block mb-2 text-primary">{{ category_post.3.category }}</strong>
                                                        <h3 class="mb-0">
                                                            <a class="text-dark" href="{% url 'post_detail' category_post.3.id %}">{{ category_post.3.title }}</a>
                                                        </h3>
                                                        <div class="mb-1 text-muted">{{ category_post.3.created_at }}</div>
                                                        <p class="card-text mb-auto">{{ category_post.3.content|truncatewords:5 }}</p>
                                                        <a href="{% url 'post_detail' category_post.3.id %}">Lire plus -></a>
                                                    </div>
                                                    <img class="card-img-right flex-auto d-none d-md-block"
                                                        data-src="holder.js/200x250?theme=thumb" alt="Thumbnail [200x250]"
                                                        src="{{ category_post.3.image.url }}"
                                                        data-holder-rendered="true" style="width: 200px; height: 250px; object-fit: cover;">
                                                </div>
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
            
                                {% endif %}
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
                                    data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
                                    data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
            
                            
                                
                            </div>
                    </div><!-- /.blog-post -->
                    </div>
                </div>
                {% include 'blog/blog_side.html' %}
            </div>
        </div>
    </div>

</div>

<!-- Lien vers Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>



{% endblock %}