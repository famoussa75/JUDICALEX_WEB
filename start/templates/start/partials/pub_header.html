<div id="bannerCarousel" class="carousel slide mb-4 mt-4" data-bs-ride="carousel" >
    <div class="carousel-inner">
  
      {% for ad in ads_header %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <a href="{% url 'ad_click' ad.id %}" target="_blank" data-ad-id="{{ ad.id }}" class="d-block w-100">
            <div class="banner-slide d-flex align-items-center justify-content-center">
              <img src="{{ ad.image.url }}" 
                   alt="{{ ad.title|default:'Publicité' }}" 
                   class="banner-img" >
            </div>
          </a>
        </div>
      {% endfor %}
  
    </div>
  
    <!-- Contrôles -->
    <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon bg-dark rounded-circle p-2"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon bg-dark rounded-circle p-2"></span>
    </button>
  
    <!-- Indicateurs -->
    <div class="carousel-indicators">
      {% for ad in ads_header %}
        <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="{{ forloop.counter0 }}" 
                class="{% if forloop.first %}active{% endif %}" aria-current="true"></button>
      {% endfor %}
    </div>
  </div>
  
  <style>
  .banner-slide {
    height: 220px; /* hauteur desktop */
    background: whitesmoke;
    overflow: hidden;
  }
  
  .banner-img {
    width: 100%;
    height: 100%;
    object-fit: contain; /* affiche toute l’image sans rognage */
    background: #fff;
    border-radius: 22px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    transition: transform 0.4s ease, box-shadow 0.4s ease;
  }
  
  .banner-slide:hover .banner-img {
    transform: scale(1.03);
    box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  }
  
  /* Responsive */
  @media (max-width: 992px) {
    .banner-slide {
      height: 180px;
    }
  }
  @media (max-width: 576px) {
    .banner-slide {
      height: 140px;
    }
  }
  </style>
  




<script>
    $(document).ready(function(){
    
        // Compter impressions dès que la page est chargée
        $('.ad-link img').each(function(){
            const adId = $(this).closest('.ad-link').data('ad-id');
            $.get("{% url 'ad_impression' %}", {ad_id: adId});
        });
    
        // Compter les clics
        $('.ad-link').on('click', function(){
            const adId = $(this).data('ad-id');
            $.get("{% url 'ad_impression' %}", {ad_id: adId}); // facultatif, si tu veux compter impression+clic
            // La redirection se fait naturellement via le href
        });
    
    });
    </script>