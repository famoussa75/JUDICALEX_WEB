{% load static %}

<div class="content-area">
 
    <h5 class="section-title">Notifications</h5>
    
    {% if notifications %}
    <div class="d-flex justify-content-between align-items-center mb-3">
      <a href="{% url 'delete_notifications' %}" class="btn btn-danger btn-sm">
        <i class="fa fa-trash me-1"></i> Supprimer tout
      </a>
    </div>
    {% endif %}
    
    <div class="notifications-container" style="max-height: 500px; overflow-y: auto;">
      {% for notification in notifications %}
        <div class="alert d-flex justify-content-between align-items-center 
                    {% if not notification.is_read %}alert-info{% else %}alert-secondary{% endif %}">
          
          <div>
            {{ notification.message|linebreaksbr }}
            <small class="d-block text-muted">{{ notification.timestamp }}</small>
          </div>
      
          <div class="d-flex gap-2">
            {% if notification.url %}
              {% if notification.url != 'profile/' %}
                <a href="{{ notification.url }}" class="btn btn-sm btn-primary">
                  <i class="fa fa-eye me-1"></i> Voir
                </a>
              {% endif %}
            {% endif %}
      
            {% if not notification.is_read %}
              <form method="post" action="{% url 'mark_as_read' notification.id %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-outline-success">
                  <i class="fa fa-check me-1"></i> Marquer comme lu
                </button>
              </form>
            {% endif %}
          </div>
        </div>
      {% empty %}
        <p class="text-muted">Aucune notification.</p>
      {% endfor %}
    </div>
    
    
  </div>